\documentclass[manuscript, timestamp, review, authorversion, nonacm, natbib=false]{acmart}

\usepackage[ruled]{algorithm2e} % For algorithms
\renewcommand{\algorithmcfname}{ALGORITHM}
\SetAlFnt{\small}
\SetAlCapFnt{\small}
\SetAlCapNameFnt{\small}
\SetAlCapHSkip{0pt}
\IncMargin{-\parindent}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% These packages are included in "acmart" package
% https://www.acm.org/publications/taps/accepted-latex-packages
% amsmath
% array
% booktabs
% caption
% fancyvrb
% graphicx
% hypdoc
% libertine
% longtable
% newtxmath
% tabularx
% zi4

%
% unicode support
%
\input{unicode-to-latex.tex}

% href support
\usepackage{hyperref}

% When render pdfs, pandoc requires these packages are avaiable in Tex Live
% https://pandoc.org/MANUAL.html#creating-a-pdf

%
% COPY FROM PANDOC DEFAULT TEMPLATE
% -- START -- %

$if(verbatim-in-note)$
\usepackage{fancyvrb}
$endif$
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
$if(title-meta)$
  pdftitle={$title-meta$},
$endif$
$if(author-meta)$
  pdfauthor={$author-meta$},
$endif$
$if(lang)$
  pdflang={$lang$},
$endif$
$if(subject)$
  pdfsubject={$subject$},
$endif$
$if(keywords)$
  pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
$endif$
$if(colorlinks)$
  colorlinks=true,
  linkcolor={$if(linkcolor)$$linkcolor$$else$Maroon$endif$},
  filecolor={$if(filecolor)$$filecolor$$else$Maroon$endif$},
  citecolor={$if(citecolor)$$citecolor$$else$Blue$endif$},
  urlcolor={$if(urlcolor)$$urlcolor$$else$Blue$endif$},
$else$
  hidelinks,
$endif$
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
$if(verbatim-in-note)$
\VerbatimFootnotes % allow verbatim text in footnotes
$endif$

%

$if(listings)$
\usepackage{listings}

\lstset{defaultdialect=[5.3]Lua}
\lstset{defaultdialect=[x86masm]Assembler}


% from https://www.overleaf.com/learn/latex/Code_listing#Code_styles_and_colours
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% listings
\lstset{
  % style - color
  commentstyle=\color{codegreen},
  keywordstyle=\color{blue},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  % style - basic
  basicstyle=\ttfamily,
  numbers=left,
  numbersep=10pt,
  frame=bottomline,
  framerule=1pt,
  numberstyle=\tiny,
  captionpos=b,
  % config
  breaklines,
  breakatwhitespace
  % literate={\_}{}{0\discretionary{\_}{}{\_}}%
}

% custom language in listings is not supported by pandoc yet. See [Todo.md]
\lstdefinelanguage{pseudo}{
    keywords={for, case, is},
    sensitive=true, % keywords are not case-sensitive
    morecomment=[l]{//}, % l is for line comment
    morecomment=[s]{/*}{*/}, % s is for start and end delimiter
    morestring=[b]" % defines that strings are enclosed in double quotes
} %

% is command dynamic evaluated?
% \NewCommandCopy{\oldlstinline}{\lstinline}
% \let\oldlstinline\lstinline
% \renewcommand{\lstinline}[1]{\oldlstinline[breaklines]{#1}}
\newcommand{\passthrough}[1]{#1}

$endif$

% 

% code highlighting
$if(highlighting-macros)$
  $highlighting-macros$
$endif$

% reference

$if(csl-refs)$
  \newlength{\cslhangindent}
  \setlength{\cslhangindent}{1.5em}
  \newlength{\csllabelwidth}
  \setlength{\csllabelwidth}{3em}
  \newlength{\cslentryspacingunit} % times entry-spacing
  \setlength{\cslentryspacingunit}{\parskip}
  \newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
  {% don't indent paragraphs
    \setlength{\parindent}{0pt}
    % turn on hanging indent if param 1 is 1
    \ifodd #1
      \let\oldpar\par
      \def\par{\hangindent=\cslhangindent\oldpar}
    \fi
    % set entry spacing
    \setlength{\parskip}{#2\cslentryspacingunit}
  }%
  {}
  \usepackage{calc}
  \newcommand{\CSLBlock}[1]{#1\hfill\break}
  \newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
  \newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
  \newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
$endif$

%
% -- END -- %
%

\begin{document}

$if(title)$
\title{$title$}
$endif$
$if(subtitle)$
\subtitle{$subtitle$}
$endif$

$if(thanks)$\thanks{$thanks$}$endif$

$for(author)$
  \author{$author.name$}
  \affiliation{%
    \institution{$author.affiliation$}
    \country{$author.country$}}
  \email{$author.email$}
$endfor$

$if(abstract)$
\begin{abstract}
  $abstract$
\end{abstract}
$endif$

\maketitle

\renewcommand{\shortauthors}{$author.name$}

$body$

\bibliographystyle{ACM-Reference-Format}

\end{document}